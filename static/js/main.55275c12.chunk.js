(this.webpackJsonpadvertapp=this.webpackJsonpadvertapp||[]).push([[0],{105:function(e,t,a){e.exports=a(175)},110:function(e,t,a){},175:function(e,t,a){"use strict";a.r(t);var n=a(1),l=a.n(n),r=a(19),c=a.n(r),o=(a(110),a(10)),i=(a(74),a(100)),u=(a(75),a(98)),s=a.n(u),m=(a(111),a(189)),d=a(96),v=a(187),E=a(184),h=a(185);var p=function(e){var t,a,r,c,i=Object(n.useState)(!1),u=Object(o.a)(i,2),p=u[0],f=u[1],g=Object(n.useState)(new Date),b=Object(o.a)(g,2),y=b[0],w=b[1];return l.a.createElement(m.a,{size:"xl",show:e.show,onHide:e.handleClose},l.a.createElement(m.a.Header,{closeButton:!0},l.a.createElement(d.a,null,e.formTitle," Event")),l.a.createElement(v.a,{onSubmit:function(t){return function(t){t.preventDefault(),t.persist(),console.log(t.target.date.value),f(!0),(e.currentEvent?e.client.updateEvent(e.currentEvent._id,t.target.name.value,t.target.location.value,t.target.date.value,t.target.price.value,t.target.info.value):e.client.addEvent(t.target.name.value,t.target.location.value,t.target.date.value,t.target.price.value,t.target.info.value)).then((function(){f(!1),t.target.reset(),e.refreshList()})).catch((function(){alert("an error occured, please try again"),f(!1)}))}(t)},id:"addForm"},l.a.createElement(m.a.Body,null,l.a.createElement(E.a,{id:"formContainer"},l.a.createElement(v.a.Group,{controlId:"eventName"},l.a.createElement(v.a.Label,null,"Event Name"),l.a.createElement(v.a.Control,{type:"text",defaultValue:null===(t=e.currentEvent)||void 0===t?void 0:t.name,name:"name",disabled:p})),l.a.createElement(v.a.Group,{controlId:"eventLocation"},l.a.createElement(v.a.Label,null,"Location"),l.a.createElement(v.a.Control,{type:"text",defaultValue:null===(a=e.currentEvent)||void 0===a?void 0:a.location,name:"location",disabled:p})),l.a.createElement(v.a.Group,{controlId:"eventDate"},l.a.createElement(v.a.Label,null,"Date"),l.a.createElement(s.a,{name:"date",placeholderText:"Click to select a date",dateFormat:"dd-MM-yyyy",closeOnScroll:!0,selected:y,showPopperArrow:!1,onChange:function(e){return w(e)}})),l.a.createElement(v.a.Group,{controlId:"eventPrice"},l.a.createElement(v.a.Label,null,"Ticket Price (\xa3)"),l.a.createElement(v.a.Control,{type:"text",defaultValue:null===(r=e.currentEvent)||void 0===r?void 0:r.price,name:"price",disabled:p})),l.a.createElement(v.a.Group,{controlId:"textInput"},l.a.createElement(v.a.Label,null,"Info"),l.a.createElement(v.a.Control,{name:"info",as:"textarea",rows:5,defaultValue:null===(c=e.currentEvent)||void 0===c?void 0:c.info,disabled:p})),l.a.createElement(h.a,{variant:"primary",type:"submit",onClick:e.handleClose},"Submit")))))},f=a(102),g=a(190),b=a(188),y=a(186),w=a(97);var k=function(e){var t=Object(n.useState)([]),a=Object(o.a)(t,2),r=a[0],c=a[1],u=Object(n.useState)(void 0),s=Object(o.a)(u,2),m=s[0],d=s[1],k=Object(n.useState)(window.localStorage.getItem("token")),C=Object(o.a)(k,2),S=C[0],N=C[1],j=Object(n.useState)(!1),O=Object(o.a)(j,2),x=O[0],I=O[1],L=function(e){!0===e&&d(void 0),I(!0)},B=function(){e.client.getAllEvents().then((function(e){return c(e.data)}))};return Object(n.useEffect)((function(){B()}),[]),l.a.createElement(l.a.Fragment,null,l.a.createElement(b.a,{bg:"light",expand:"lg"},l.a.createElement(E.a,{fluid:!0},l.a.createElement(b.a.Brand,{href:"#"},"Events App"),l.a.createElement(b.a.Toggle,{"aria-controls":"navbarScroll"}),l.a.createElement(b.a.Collapse,{id:"navbarScroll"},l.a.createElement(y.a,{className:"me-auto my-2 my-lg-0",style:{maxHeight:"100px"},navbarScroll:!0}),l.a.createElement(y.a.Link,{onClick:function(){console.log(S),window.localStorage.removeItem("token"),N("")},href:"#",style:{color:"rgba(0,0,0,.9)"}},"Logout ",l.a.createElement(f.a,null)),l.a.createElement(v.a,{className:"d-flex"},l.a.createElement(w.a,{type:"search",placeholder:"Search",className:"me-2","aria-label":"Search"}),l.a.createElement(h.a,{variant:"outline-success"},"Search"))))),l.a.createElement("br",null),l.a.createElement(E.a,null,l.a.createElement(g.a,{className:"otherCard",style:{width:"100%"}},l.a.createElement(g.a.Header,{as:"h5",className:"card-header"},l.a.createElement(g.a.Title,null,"Add Your Event Here",l.a.createElement("span",{className:"float-right"},"When is it?",l.a.createElement("br",null),"Price: ",l.a.createElement("span",{className:"bold"},"\xa3"))),l.a.createElement(g.a.Subtitle,{className:"text-muted"},"Where is it?")),l.a.createElement(g.a.Body,null,l.a.createElement(g.a.Text,{className:"mb-1"},"Tells us more about your event..."),l.a.createElement("span",{className:"card-trash"},l.a.createElement(h.a,{onClick:function(){return L(!0)},variant:"primary"},"Add Event"))))),l.a.createElement("br",null),l.a.createElement(E.a,null,r.map((function(t){return l.a.createElement("div",{key:t.id},l.a.createElement(g.a,{className:"otherCard",style:{width:"100%"}},l.a.createElement(g.a.Header,{as:"h5",className:"card-header"},l.a.createElement(g.a.Title,null,t.name,l.a.createElement("span",{className:"float-right"},t.date,l.a.createElement("br",null),"Price: ",l.a.createElement("span",{className:"bold"},"\xa3",t.price))),l.a.createElement(g.a.Subtitle,{className:"text-muted"},t.location)),l.a.createElement(g.a.Body,null,l.a.createElement(g.a.Text,{className:"mb-1"},t.info),l.a.createElement("span",{className:"card-trash"},l.a.createElement(h.a,{onClick:function(){return d(t),void L()},variant:"primary"},"Update"),"\xa0\xa0",l.a.createElement(h.a,{onClick:function(){return a=t._id,void e.client.removeEvent(a).then((function(){return B()}));var a},variant:"danger"},l.a.createElement(i.a,null))))),l.a.createElement("br",null))}))),l.a.createElement("br",null),l.a.createElement(p,{client:e.client,show:x,handleClose:function(){return I(!1)},handleShow:L,refreshList:function(){B(),d(void 0)},currentEvent:m}))},C=a(36),S=a(37),N=a(84),j=a.n(N),O="https://rowens96-events-app.herokuapp.com/",x=function(){function e(t,a){Object(C.a)(this,e),this.token=t,this.logoutHandler=a}return Object(S.a)(e,[{key:"apiCall",value:function(e,t,a){return console.log(t),j()({method:e,url:t,data:a}).catch((function(e){throw e}))}},{key:"authenticatedCall",value:function(e,t,a){var n=this;return j()({method:e,url:t,headers:{authorization:this.token},data:a}).catch((function(e){if(403===e.response.status)return n.logoutHandler(),Promise.reject;throw e}))}},{key:"login",value:function(e,t){return this.apiCall("post","".concat(O,"auth"),{userName:e,password:t})}},{key:"addNewUser",value:function(e,t){return this.authenticatedCall("post","".concat(O,"signup"),{username:e,password:t})}},{key:"getAllEvents",value:function(){return this.authenticatedCall("get","".concat(O,"event"))}},{key:"getEventById",value:function(e){return this.authenticatedCall("get","".concat(O,"search/id/").concat(e))}},{key:"getEventByName",value:function(e){return this.authenticatedCall("get","".concat(O,"search/name/").concat(e))}},{key:"getEventsByLocation",value:function(e){return this.authenticatedCall("get","".concat(O,"search/location/").concat(e))}},{key:"getEventsByDate",value:function(e){return this.authenticatedCall("get","".concat(O,"search/date/").concat(e))}},{key:"addEvent",value:function(e,t,a,n,l){return this.authenticatedCall("post","".concat(O,"event"),{name:e,location:t,date:a,price:n,info:l})}},{key:"removeEvent",value:function(e){return this.authenticatedCall("delete","".concat(O,"event/").concat(e))}},{key:"updateEvent",value:function(e,t,a,n,l,r){return this.authenticatedCall("put","".concat(O,"event/").concat(e),{name:t,location:a,date:n,price:l,info:r})}}]),e}();var I=function(e){var t=Object(n.useState)(!1),a=Object(o.a)(t,2),r=a[0],c=a[1];return l.a.createElement("div",{className:"login-child"},l.a.createElement("span",{className:"login-header"},"Hello"),l.a.createElement("hr",null),l.a.createElement("form",{onSubmit:function(t){return function(t){t.preventDefault(),c(!0),e.client.login(t.target.username.value,t.target.password.value).then((function(t){c(!1),e.loggedIn(t.data.token)})).catch((function(e){alert("Invalid username and password"),console.log(e),c(!1)}))}(t)}},"username",l.a.createElement("br",null),l.a.createElement("input",{type:"text",name:"username",disabled:r}),l.a.createElement("br",null),"password",l.a.createElement("br",null),l.a.createElement("input",{type:"password",name:"password",disabled:r}),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement(h.a,{variant:"outline-success",type:"submit",disabled:r}," ","Login"," "),"\xa0\xa0\xa0",l.a.createElement(h.a,{variant:"outline-primary",onClick:function(t){return function(t){t.preventDefault(),console.log(e),console.log(t),e.client.addNewUser(t.target.username.value,t.target.password.value).then((function(e){c(!1)})).catch((function(e){alert("an error has occurred"),console.log(e),c(!1)}))}(t)},type:"",disabled:r}," ","Sign Up"," ")))};var L=function(){var e=Object(n.useState)(window.localStorage.getItem("token")),t=Object(o.a)(e,2),a=t[0],r=t[1],c=new x(a,(function(){window.localStorage.removeItem("token"),r("")}));return l.a.createElement(l.a.Fragment,null,a?l.a.createElement(k,{client:c}):l.a.createElement("div",{className:"login-parent"},l.a.createElement("div",{className:"login-form"},l.a.createElement(I,{client:c,loggedIn:function(e){window.localStorage.setItem("token",e),r(e)}}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(L,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},75:function(e,t,a){}},[[105,1,2]]]);
//# sourceMappingURL=main.55275c12.chunk.js.map